let _window=$(window),_document=$(document);function sectionNavigation(){_document.on("click",'[href="#"]',function(e){e.preventDefault()}).on("click",'a[href^="#section"]',function(){let e=$(this).attr("href");return $("body, html").animate({scrollTop:$(e).offset().top-document.querySelector(".header").offsetHeight-30},1e3),!1})}function sortColumn(){if(!document.querySelector(".js-temporary-wrap"))return;const e=document.querySelector(".js-temporary-wrap"),t=document.querySelector(".reviews__l"),n=document.querySelector(".reviews__c"),i=document.querySelector(".reviews__r");function o(){let o=1;e.querySelectorAll(".review").length<=9&&(document.querySelector(".reviews__btn-more").style.display="none"),[...e.querySelectorAll(".review")].slice(0,9).forEach(e=>{1===o?t.append(e):2===o?n.append(e):3===o&&(i.append(e),o=0),o++})}o(),document.querySelector(".reviews__btn-more").addEventListener("click",o)}function accountAccordion(){$(".account-sidebar__wrap-item").click(function(){$(this).find(".account-sidebar__btn").length&&($(this).toggleClass("account-sidebar__wrap-item_open"),$(this).find(".account-sidebar__sublist").slideToggle())}),$(".account-sidebar__link, .account-sidebar__sublink").click(function(e){e.stopPropagation()}),$(".account-sidebar__item_current").find(".account-sidebar__btn").click(),$(".acc-billing-item__btn-info").click(function(){let e=$(this).closest(".acc-billing-item");e.toggleClass("acc-billing-item_open"),e.find(".acc-billing-item__slide-content").slideToggle()}),$(".acc-billing-item__btn-offers-company").click(function(){let e=$(this).closest(".acc-billing-item");$(this).toggleClass("acc-billing-item__btn-offers-company_open"),e.find(".acc-billing-item__slide-content2").slideToggle()}),$(".acc-billing-item__btn-cancel2").click(function(e){confirm("Sind Sie sicher, dass Sie den Auftrag löschen wollen?")||e.preventDefault()})}function activeHeaderScroll(){let e=$("header.header");_window.on("scroll load",function(){_window.scrollTop()>=10?e.addClass("active"):e.removeClass("active")})}function burgerMenu(){let e=$(".burger"),t=$(".header__nav"),n=$(".header__sub-arrow"),i=$(".footer__sub-arrow");function o(){window.innerWidth<=992?t.addClass("header__nav_transition"):(t.removeClass("header__nav_transition"),n.removeClass("header__sub-arrow_select"),$(".header__wrap-sub-menu").css({display:""}))}window.addEventListener("resize",o),o(),n.click(function(e){e.preventDefault(),$(this).toggleClass("header__sub-arrow_select"),$(this).parent().next().slideToggle()}),i.click(function(e){e.preventDefault(),$(this).toggleClass("footer__sub-arrow_select"),$(this).parent().next().slideToggle()}),$(document).click(function(n){e.is(n.target)||1===e.has(n.target).length?t.hasClass("active")?(t.removeClass("active"),e.removeClass("active"),$("body").removeClass("body_hidden")):(t.addClass("active"),e.addClass("active"),$("body").addClass("body_hidden")):!t.is(n.target)&&0===t.has(n.target).length&&t.hasClass("active")&&(t.removeClass("active"),e.removeClass("active"),$("body").removeClass("body_hidden"))})}function datePicker(){$('[data-toggle="datepicker"]').datepicker({startDate:Date,language:"ru-RU",autoHide:!0,format:"dd-mm-yyyy",weekStart:1,daysMin:["So","Mo","DI","Mi","Do","Fr","Sa"],months:["January","February","March","April","May","June","Jule","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]})}function faqSlideToggle(){$(".faq-item__btn").click(function(){let e=$(this).closest(".faq-item");e.toggleClass("faq-item_open"),e.find(".faq-item__content").slideToggle(),e.hasClass("faq-item_open")?$(this).text($(this).data("hide-content")):$(this).text($(this).data("show-content"))})}function headerHeightFun(){if(!document.querySelector(".header"))return;let e=document.querySelector(".header").offsetHeight;document.documentElement.style.setProperty("--headerHeight",`${e}px`)}function initPopups(){let e=0;$(".js-popup").magnificPopup({type:"inline",fixedContentPos:!0,fixedBgPos:!0,overflowY:"auto",closeBtnInside:!0,preloader:!1,midClick:!0,removalDelay:300,mainClass:"popup-buble",callbacks:{beforeOpen:function(){e=_window.scrollTop()},close:function(){_window.scrollTop(e)}}})}function initSelectric(){$("select").selectric({maxHeight:300,arrowButtonMarkup:'<b class="button"></b>',onInit:function(e,t){var n=$(e);n.closest("."+t.classes.wrapper).find(".label").html(n.attr("placeholder"))},onBeforeOpen:function(e,t){var n=$(e),i=n.closest("."+t.classes.wrapper);i.find(".label").data("value",i.find(".label").html()).html(n.attr("placeholder"))},onBeforeClose:function(e,t){var n=$(e).closest("."+t.classes.wrapper);n.find(".label").html(n.find(".label").data("value"))}})}function initSliders(){}function inputMask(){$(".js-card-number").mask("0000 0000 0000 0000"),$(".js-card-expiry-date").mask("00/00"),$(".js-card-sequrity-code").mask("000")}function legacySupport(){svg4everybody()}function scrollTop(){_window.scroll(function(){$(this).scrollTop()>250?$("#back-top").fadeIn(300):$("#back-top").fadeOut(300)}),$("#back-top").click(function(){return $("html, body").animate({scrollTop:0},750),!1})}function inputPhoto(){if(document.querySelector(".acc-company-profile__photo")){let e=document.querySelector(".js-input-photo");e.addEventListener("change",function(t){let n=new FileReader,i=e.files[0],o=e.closest(".acc-company-profile__photo").querySelector(".js-photo-result");n.readAsDataURL(i),n.addEventListener("load",function(e){o.src=e.target.result})})}}function stepsForms(){if(!document.querySelector(".steps-indicators"))return;let e={},t=document.querySelectorAll(".steps-indicators__item"),n=document.querySelectorAll(".temp-form-steps"),i=document.querySelectorAll(".temp-form-steps .prev-step"),o=!1,a=!1;if(document.querySelectorAll('input[type="file"]').length){document.querySelectorAll('input[type="file"]').forEach(e=>{e.addEventListener("change",function(t){let n=e.files[0].name;e.closest(".js-wrap-input-file").querySelector(".js-txt-input-file").innerHTML=n})})}function r(t){t.preventDefault();let n=new FormData(t.target);for(let t of n.keys())e[t]&&delete e[t];for(let t of n.keys())t.indexOf("[]")>=0?e[t]=[]:e[t]=!0;for(let[t,i]of n.entries())Array.isArray(e[t])?e[t].push(i):e[t]=i;if("profile"===t.target.dataset.name){let e=t.target.querySelector('input[name="password"]'),n=t.target.querySelector('input[name="password_confirmation"]');if(e.nextElementSibling.textContent="",n.nextElementSibling.textContent="",e.classList.remove("is-invalid"),n.classList.remove("is-invalid"),e.value.trim().length<8||e.value.trim()!==n.value.trim())return e.classList.add("is-invalid"),n.classList.add("is-invalid"),void(e.value.trim().length<8?e.nextElementSibling.textContent="Das Passwort ist zu kurz":e.value.trim()!==n.value.trim()&&(n.nextElementSibling.textContent="Passwörter stimmen nicht überein"))}if("profile"===t.target.dataset.name||"region"===t.target.dataset.name){if(t.target.querySelectorAll('input[type="checkbox"]').length&&!t.target.querySelectorAll('input[type="checkbox"]:checked').length)return void jQuery(".steps-form__checkboxes .invalid-feedback").show();jQuery(".steps-form__checkboxes .invalid-feedback").hide()}if("general-data"===t.target.dataset.name||"mailcheck"===t.target.dataset.name){let e=t.target.querySelector('input[type="email"]'),n=$(e).val(),i=$(t.target).attr("email-check"),o=!0;jQuery.ajax({type:"POST",url:i,data:{email:n},dataType:"html",success:function(t){if(o=JSON.parse(t).success,console.log(o),0==o)return $(e).parent().find(".invalid-feedback").show(),$(e).addClass("is-invalid"),void $("body, html").animate({scrollTop:$(e).offset().top-150},900);$(e).removeClass("is-invalid"),$(e).parent().find(".invalid-feedback").hide(),l()}})}else l()}function l(){if(o)return;o=!0;let t=document.querySelector(".temp-form-steps_active");if(!t.nextElementSibling)return void(a||(a=!0,function(){let t=$(".temp-form-steps_active").attr("data-url"),n=new FormData;for(let t in e)t.indexOf("[]")>=0?n.append(t.replace("[]",""),JSON.stringify(e[t])):n.append(t,e[t]);$.ajax({type:"POST",url:t,data:n,processData:!1,contentType:!1,enctype:"multipart/form-data",success:function(e){window.location.href=e.url}})}()));let n=t.nextElementSibling;t.classList.remove("temp-form-steps_active"),n.classList.add("temp-form-steps_active"),$(t).hide(),$(n).fadeIn(400,()=>{o=!1}),c(),$([document.documentElement,document.body]).animate({scrollTop:$(".steps-indicators__wrap").offset().top},1e3)}function s(e){if(e.preventDefault(),o)return;o=!0;let t=document.querySelector(".temp-form-steps_active");if(!t.previousElementSibling)return;let n=t.previousElementSibling;t.classList.remove("temp-form-steps_active"),n.classList.add("temp-form-steps_active"),$(t).hide(),$(n).fadeIn(400,()=>{o=!1}),c()}function c(){let e=document.querySelector(".temp-form-steps_active"),n=$(e).index()+1;for(let e=0;e<t.length;e++)t[e].classList.remove("steps-indicators__item_active");for(let e=0;e<n;e++)t[e].classList.add("steps-indicators__item_active")}n.forEach(e=>{e.addEventListener("submit",r)}),i.forEach(e=>{e.addEventListener("click",s)}),document.addEventListener("click",function(e){e.target.closest(".is-invalid")&&e.target.closest(".is-invalid").classList.remove("is-invalid")})}function vhModule(){let e=.01*window.innerHeight;document.documentElement.style.setProperty("--vh",`${e}px`),window.addEventListener("resize",()=>{let e=.01*window.innerHeight;document.documentElement.style.setProperty("--vh",`${e}px`)})}$(document).ready(function(){document.querySelectorAll('a[href^="#id-"]').forEach(e=>{e.id=e.getAttribute("href").replace("#id-","section-"),e.style.height="0",e.style.overflow="hidden",e.style.display="block"}),legacySupport(),burgerMenu(),scrollTop(),headerHeightFun(),vhModule(),faqSlideToggle(),datePicker(),accountAccordion(),stepsForms(),inputMask(),inputPhoto(),sortColumn(),sectionNavigation(),$("input[name='additional_info[square]'],input[name='additional_info[rooms]'],input[name='additional_info[floor]'],input[name='additional_info[number]'],input[name='additional_info[zip]'],input[name='additional_info[to][square]'],input[name='additional_info[to][floor]'],input[name='additional_info[to][zip]'],input[name='additional_info[to][number]'],input[name='additional_info[from][square]'],input[name='additional_info[from][rooms]'],input[name='additional_info[from][zip]'],input[name='additional_info[from][number]'],input[name='additional_info[from][floor]']").inputFilter(function(e){return/^\d*$/.test(e)}),window.addEventListener("resize",()=>{headerHeightFun()}),$(".allecheck").click(function(){$('input[name^="regions_ids"]').each(function(){$(this).attr("checked","checked")})})}),jQuery.fn.inputFilter=function(e){return this.on("input keydown keyup mousedown mouseup select contextmenu drop",function(){e(this.value)?(this.oldValue=this.value,this.oldSelectionStart=this.selectionStart,this.oldSelectionEnd=this.selectionEnd):this.hasOwnProperty("oldValue")?(this.value=this.oldValue,this.setSelectionRange(this.oldSelectionStart,this.oldSelectionEnd)):this.value=""})},$("#partner-info-form").submit(e=>{e.preventDefault(),$(".js-partner-info-check-field").each(function(){$(this).val()!==$(this).attr("data-initial-value")&&(e.target.new_request_update.value=!0)});const t=new FormData(e.target);fetch(`${e.target.action}`,{method:"POST",body:t}).then(t=>{"true"===e.target.new_request_update.value?alert("Die Anfrage auf Änderung der Daten wurde angenommen. Die Informationen werden aktualisiert, sobald sie vom Administrator der Website überprüft wurden."):alert("Daten aktualisiert")})}),$("#minisearch").keyup(function(){var e=$(this).val();$(".acc-billing__inner>div").each(function(){$(this).find(".acc-billing-item__path").text().search(new RegExp(e,"i"))<0?$(this).hide():($(this).show(),0)})}),$('.main-banner__form select[name="service"]').change(function(){let e=$(this).val();$(".main-banner__form").attr("action",e)}),document.querySelectorAll(".section-txt .steps-desc__txt").forEach(e=>{const t=document.createElement("span");if(t.textContent=e.textContent,e.textContent="",e.appendChild(t),t.getClientRects().length>4){const t=document.createElement("button");t.textContent="Mehr lesen",t.addEventListener("click",()=>{t.previousElementSibling.classList.add("show-full"),t.style.display="none"}),e.insertAdjacentElement("afterend",t)}});